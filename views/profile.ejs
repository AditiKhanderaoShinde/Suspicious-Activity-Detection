<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Profile</title>
    <link rel="stylesheet" href="assets/css/profile.css" />
    <link rel="stylesheet" href="/style.css">
    <style>
        .my-5 {
            margin-top: 100px !important;
        }

        .list-group-item.active {
            background: #06C167 !important;
        }

        .bg-warning {
            background: #06C167 !important;
        }

        .modal-content {
            background-color: #fefefe;
            margin: 4% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 70%;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease-in-out;
            /*transform: translateY(-100%);*/
        }

        .close {
            float: right;
            text-align: right;
            font-size: 30px;
        }

        .modal-content h2 {
            text-align: center;
            margin-top: -35px;
        }

        .button_div {
            justify-content: center;
            text-align: center;
        }

        .button_div button {
            margin-right: 10px;
            background: #06C167;
            border: 1px solid #06C167;
            padding: 5px 15px;
            color: #FFFFFF;
            border-radius: 2px;
        }

        #addAddressForm input {
            padding: 5px;
        }

        .nice-select {
            padding: 0px !important;
            height: 38px !important;
            line-height: 38px !important;
        }

        .add_address_button {
            background: #06C167;
            border: 1px solid #06C167;
            padding: 5px 15px;
            color: #FFFFFF;
            border-radius: 2px;
        }

        @media (max-width: 768px) {
            .main_flex_div {
                display: flex;
                flex-direction: column;
            }

            .inner_flex_div {
                min-width: 100% !important;
            }

            .modal-content {
                padding: 10px 0px !important;
                min-width: 95% !important;
                height: 700px;
                overflow: scroll;
            }

            .close {
                margin-right: 10px;
            }
        }

        .rwd-table {
            margin: auto;
            min-width: 300px;
            max-width: 100%;
            border-collapse: collapse;
        }

        .rwd-table tr {
            border-top: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
        }

        .rwd-table th {
            display: none;
        }

        .rwd-table td {
            display: block;
        }

        .rwd-table td:first-child {
            margin-top: .5em;
        }

        .rwd-table td:last-child {
            margin-bottom: .5em;
        }

        .rwd-table td:before {
            content: attr(data-th) ": ";
            font-weight: bold;
            width: 120px;
            display: inline-block;
            color: #000;
        }

        .rwd-table th,
        .rwd-table td {
            text-align: left;
        }

        .rwd-table {
            color: #333;
            border-radius: .4em;
            overflow: hidden;
        }

        .rwd-table tr {
            border-color: #bfbfbf;
        }

        .rwd-table th,
        .rwd-table td {
            padding: .5em 1em;
        }

        @media screen and (max-width: 601px) {
            .rwd-table tr:nth-child(2) {
                border-top: none;
            }
        }

        @media screen and (min-width: 600px) {

            .rwd-table td:before {
                display: none;
            }

            .rwd-table th,
            .rwd-table td {
                display: table-cell;
                padding: 0.4rem;
            }

            .rwd-table th:first-child,
            .rwd-table td:first-child {
                padding-left: 0;
            }

            .rwd-table th:last-child,
            .rwd-table td:last-child {
                padding-right: 0;
            }

            .rwd-table th,
            .rwd-table td {
                padding: 0.4em !important;
            }
        }

        a {
            text-decoration: none !important;
        }

        .addstaffbtn {
            border: 1px solid red;
            padding: 10px;
            border-radius: 7px;
            color: black;
        }

        .card-box {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 10px;
        }

        .headingBox {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>

<body>
    <div class="menu">
        <%- include('common/nav') -%>
    </div>
    <section class="my-5">
        <div class="container">
            <div class="main-body">
                <div class="row">
                    <div class="col-lg-4">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQtbEsykx-0fhTred6UwHDYtMFd2UgTJCG4gaklT1dx4suRO4_n5LJr4Gg28kquSX5fpNo&usqp=CAU"
                                        alt="Admin" class="rounded-circle p-1 bg-warning" width="110">
                                    <div class="mt-3">
                                        <h4>
                                            <%=user.name%>
                                        </h4>
                                        <p class="text-secondary mb-1">+91 <%=user.contact%>
                                        </p>
                                        <p class="text-muted font-size-sm">
                                            <%=user.address%>
                                        </p>
                                    </div>
                                </div>
                                <div class="list-group list-group-flush text-center mt-4">
                                    <a href="#" class="list-group-item list-group-item-action border-0 "
                                        onclick="showProfileDetails()">
                                        Profile Informaton
                                    </a>
                                    <% if(user.role=='Admin' ){ %>
                                        <a href="#" class="list-group-item list-group-item-action border-0"
                                            onclick="showStaffList()">Staff List</a>

                                        <a href="#" class="list-group-item list-group-item-action border-0 active"
                                            onclick="showUserList()">
                                            User List
                                        </a>
                                        <% }else{ %>

                                            <% } %>
                                                <a href="/logout"
                                                    class="list-group-item list-group-item-action border-0">Logout</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div id="orderDetails" class="order_card">
                            <div class="card">
                                <div class="card-body">
                                    <div class="top-status">
                                        <div class="card-box">
                                            <h5>Staff List</h5>
                                            <a class="addstaffbtn" href="/addstaff">Add Staff</a>
                                        </div>
                                        <div class="container">
                                            <table class="rwd-table">
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Email</th>
                                                    <th>Role</th>
                                                    <th>Contact</th>
                                                    <th>City</th>
                                                    <th>Action</th>
                                                </tr>
                                                <% if(user.role=='Admin' ){ %>
                                                    <% staffData.forEach(function(staffs){ %>
                                                        <tr>
                                                            <td>
                                                                <%= staffs.name%>
                                                            </td>
                                                            <td>
                                                                <%= staffs.email%>
                                                            </td>
                                                            <td>
                                                                <%= staffs.role%>
                                                            </td>
                                                            <td>
                                                                <%= staffs.contact%>
                                                            </td>
                                                            <td>
                                                                <%= staffs.address%>
                                                            </td>
                                                            <td>
                                                                <a href="/deletestaffrow/<%=staffs._id%>">
                                                                    <img width="20" height="20"
                                                                        src="https://www.iconpacks.net/icons/1/free-trash-icon-347-thumb.png"
                                                                        alt="">
                                                                </a>
                                                                <a href="/sendstaffdata/<%=staffs._id%>">
                                                                    <img width="20" height="20"
                                                                        src="https://png.pngtree.com/png-vector/20190129/ourmid/pngtree-pencil-vector-icon-png-image_355999.jpg"
                                                                        alt="">
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        <% }) %>
                                                            <% }else{ %>
                                                                <% } %>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div id="profileDetails" class="card" style="display: none;">
                            <div class="card-body">
                                <div class="profile-info">
                                    <% if(user.role=='Admin' ){ %>
                                        <div class="headingBox">
                                            <h5>Welcome <%= user.role%> Profile Information</h5>
                                            <a href="/editprofiledata/<%= user.role%>/<%= user._id%>">
                                                <img width="20" height="20"
                                                    src="https://png.pngtree.com/png-vector/20190129/ourmid/pngtree-pencil-vector-icon-png-image_355999.jpg"
                                                    alt="">
                                            </a>
                                        </div>
                                        <% }else{ %>
                                            <div class="headingBox">
                                                <h5>Welcome Staff Profile Information</h5>
                                                <a href="/editprofiledata/<%= user.role%>/<%= user._id%>">
                                                    <img width="20" height="20"
                                                        src="https://png.pngtree.com/png-vector/20190129/ourmid/pngtree-pencil-vector-icon-png-image_355999.jpg"
                                                        alt="">
                                                </a>
                                            </div>
                                            <% } %>
                                                <p><strong>Name:</strong>
                                                    <%=user.name%>
                                                </p>
                                                <p><strong>Email Address:</strong>
                                                    <%=user.email%>
                                                </p>
                                                <p><strong>Contact:</strong> +91 <%=user.contact%>
                                                </p>
                                                <p><strong>City:</strong>
                                                    <%=user.address%>
                                                </p>
                                                <p><strong>Role:</strong>
                                                    <%=user.role%>
                                                </p>
                                </div>
                            </div>
                        </div>

                        <div id="addressBook" class="card" style="display: none;">
                            <div class="card-body">
                                <h5>Address Book</h5>
                                <button class="add_address_button" onclick="showAddAddressModal()">Add Address</button>

                                <div id="addressList">

                                </div>
                            </div>
                        </div>

                        <div id="addAddressModal" class="modal">
                            <div class="modal-content">
                                <span class="close" onclick="closeAddAddressModal()">&times;</span>
                                <h2>Add Address</h2>
                                <form id="addAddressForm" onsubmit="saveAddress(event)">

                                    <div class="col-12 d-flex main_flex_div">
                                        <div class="col-4 d-flex flex-column inner_flex_div">
                                            <label for="name">Name:</label>
                                            <input type="text" id="name" required><br>
                                        </div>
                                        <div class="col-4 d-flex flex-column inner_flex_div">
                                            <label for="mobile">Mobile No.:</label>
                                            <input type="tel" id="mobile" required pattern="[0-9]{10}">
                                        </div>
                                        <div class="col-4 d-flex flex-column inner_flex_div">
                                            <label for="pincode">Pin code:</label>
                                            <input type="text" id="pincode" required><br>

                                        </div>
                                    </div>


                                    <div class="col-12 d-flex main_flex_div">

                                        <div class="col-4 d-flex flex-column inner_flex_div">
                                            <label for="locality">Locality:</label>
                                            <input type="text" id="locality" required><br>
                                        </div>

                                        <div class="col-4 d-flex flex-column inner_flex_div">
                                            <label for="city">City/District/Town:</label>
                                            <input type="text" id="city" required><br>

                                        </div>

                                        <div class="col-4 d-flex flex-column inner_flex_div">
                                            <label for="state">State:</label>
                                            <select id="state" required>
                                                <option value="">Select a state</option>
                                                <option value="State 1">State 1</option>
                                                <option value="State 2">State 2</option>
                                                <option value="State 3">State 3</option>
                                            </select><br>
                                        </div>

                                    </div>

                                    <div class="col-12 d-flex main_flex_div">
                                        <div class="col-12 d-flex flex-column inner_flex_div">
                                            <label for="address">Address:</label>
                                            <textarea id="address" required></textarea><br>
                                        </div>

                                    </div>


                                    <div class="col-12 d-flex main_flex_div">
                                        <div class="col-6 d-flex flex-column inner_flex_div">
                                            <label for="landmark">Landmark (Optional):</label>
                                            <input type="text" id="landmark"><br>

                                        </div>
                                        <div class="col-6 d-flex flex-column inner_flex_div">
                                            <label for="alternatePhone">Alternate Phone (Optional):</label>
                                            <input type="tel" id="alternatePhone" pattern="[0-9]{10}"><br>
                                        </div>


                                    </div>

                                    <div class="col-12 d-flex button_div">
                                        <button type="submit">Save</button>
                                        <button type="button" onclick="closeAddAddressModal()">Cancel</button>
                                    </div>


                                </form>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <script>

        function showAddAddressModal() {
            const modal = document.getElementById('addAddressModal');
            modal.style.display = 'block';
            isFormVisible = true;
        }

        function closeAddAddressModal() {
            const modal = document.getElementById('addAddressModal');
            modal.style.display = 'none';
            isFormVisible = false;
        }

        function showProfileDetails() {
            hideAllSections();
            document.getElementById('profileDetails').style.display = 'block';
            setActiveLink(0);
        }

        function showStaffList() {
            hideAllSections();
            document.getElementById('orderDetails').style.display = 'block';
            setActiveLink(1);
        }

        function showUserList() {
            hideAllSections();
            document.getElementById('addressBook').style.display = 'block';
            setActiveLink(2);
        }

        function hideAllSections() {
            document.getElementById('orderDetails').style.display = 'none';
            document.getElementById('profileDetails').style.display = 'none';
            document.getElementById('addressBook').style.display = 'none';
        }

        function setActiveLink(index) {
            document.querySelector('.list-group-item.active').classList.remove('active');
            document.querySelectorAll('.list-group-item')[index].classList.add('active');
        }

        showProfileDetails();
    </script>

</body>

</html>